<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WebMapa 101t</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0/dist/leaflet.css">
    <script src="https://unpkg.com/leaflet@1.0/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
    <style>
        #header{
            height: 75px;
            background-color: darkgoldenrod;
        }
        #mapdiv{
            height: 650px;
            background-color: salmon;
        }
        #side-panel{
            height: 650px;
            background-color: beige;
        }
        #footer{
            height: 75px;
            background-color: darkgrey;
        }
    </style>
</head>
<body>
    <div id="header" class="col-md-12">
        <h1 class="text-center">Mexico City</h1>
    </div>
    <div id="side_panel" class="col-md-3">
        <h1 class="text-center">Attractions</h1>
        <button id="zoomToZocalo" class="form-control btn-primary">Zocalo</button>
    </div>
    <div id="mapdiv" class="col-md-9"></div>
    <div id="footer" class="col-md-12">
        <h4 id="map_coords" class="text-center">Latitude 19.4 Longitude -99.1 Zoom Level:11</h4>
        <h4 class="text-center">&copy;2016 <a href="http://millermountain.com">Miller Mountain LLC</a></h4>
    </div>

    <script>
        var mymap = L.map('mapdiv')
        mymap.setView([19.4, -99.1], 11);

        var backgroundLayer = L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png');
        mymap.addLayer(backgroundLayer);

        //jeito "aberto" de fazer
        // var zocaloMarker = L.marker([19.43278, -99.13333]);
        // zocaloMarker.addTo(mymap);
        // zocaloMarker.bindPopup("Zocalo");

        //tudo em uma linha só

        var zocaloMarker = L.marker([19.43278, -99.13333]).addTo(mymap).bindPopup("<h3 class='text-center'>Zocalo</h3><a href='https://pt.wikipedia.org/wiki/Pra%C3%A7a_da_Constitui%C3%A7%C3%A3o_(Cidade_do_M%C3%A9xico)' target='blank'><img src='img/portada.jpg' width='200px'></a>");

        //usando o evento .click, para o elemento com id=#zoomToZocalo, que é um botão
        $("#zoomToZocalo").click(function () {
            mymap.setView([19.43278, -99.13333], 17);
        });

        //usando o evento on, que chama o evento seguinte, nesse caso, mousemove (movimento do mouse)
        mymap.on('mousemove',function (e) {//o evento se dará na variavel mymap, que armazena o mapa (L.map, função do leaflet), cujo id=#mapdiv
            var str = "Latitude: "+e.latlng.lat.toFixed(5)+" Longitude: "+e.latlng.lng.toFixed(5)+//a variavel str armazena as strings e os valores do paramentro (e), com a função nativa do Leaflet latlng (latitude e longitude)
            " Zoom Level: "+mymap.getZoom();//a variavel armazena ainda o atual nível de zoom do mapa
            $("#map_coords").html(str);//a função altera então o html, do elemento h4, cuji id="map_coords, que está inserido na div cujo id=footer"
        });

        mymap.on('click',function (a) {//criei uma função no mymap acionada pelo evento click do mouse
            var coord = "Latitude: "+a.latlng.lat.toFixed(5)+" Longitude: "+a.latlng.lng.toFixed(5);//a variavel coord armazenou as coordenadas na forma de texto
            var clickMarker = L.marker(a.latlng).addTo(mymap).bindPopup(coord);//o L.marker, armazenou a coordenada do maymap pela função nativa latilng, que com o parametro a.latlng ele sabe que é a coordenada do my map, pois a é o parametro da minha função anonima.
        })
    </script>
</body>
</html>